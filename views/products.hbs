<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BRAND SHOP — Products</title>
  <link rel="stylesheet" href="/css/globals.css">
  <link rel="stylesheet" href="/css/style1.css">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="container">
    <!-- Header из index1.html -->
    <header class="header">
      <!-- ... скопируйте header из index1.txt ... -->
      <!-- В корзине: {{cartLen}} -->
      <a href="/cart" class="Cart" style="background-image:url('/img/cart.png');background-size:cover;width:24px;"></a>
      <!-- Счётчик -->
      {{#if cartLen}}<span style="position:absolute;top:-8px;right:-8px;background:#e71d36;color:white;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:12px;">{{cartLen}}</span>{{/if}}
    </header>

    <!-- Фильтр (как в 3 Фильтрация.doc) -->
    <section class="filters">
      <form method="GET">
        <select name="cat_id">
          <option value="0">All Categories</option>
          {{#each categories}}
            <option value="{{cat_id}}" {{#if (eq cat_id ../curCatId)}}selected{{/if}}>{{cat_name}}</option>
          {{/each}}
        </select>
        <button type="submit">Filter</button>
      </form>
    </section>

    <!-- Товары -->
    <section class="products-scroll">
      <h2>Best Sellers on Sale</h2>
      <div class="products-grid">
        {{#each products}}
        <a href="/product/{{prod_id}}" class="product-card">
          <div class="product-image">
            <img src="/img/{{image_main}}">
            {{#if image_hover}}<img src="/img/{{image_hover}}" class="hover">{{/if}}
            <button class="wishlist-btn">❤</button>
          </div>
          <h3>{{prod_name}}</h3>
          <p class="price">${{price}}</p>
          <a href="/sales/addToCart/{{prod_id}}" class="add-cart-btn">+ Bag</a>
        </a>
        {{/each}}
      </div>
    </section>
  </div>
  <script>
    // Восстановление selected (как в ТЗ)
    const select = document.querySelector('select[name="cat_id"]');
    if (select && {{curCatId}}) {
      select.value = '{{curCatId}}';
    }
  </script>
</body>
</html>